snowflake_custom_instructions: 
  - name: jaffle_shop_business_rules
    question_categorization: |
      This is a demo project for the Jaffle Shop, a fictional sandwich/beverage restaurant.
      Accept questions about:
      - Sales metrics (revenue, order counts, average order value)
      - Customer analytics (lifetime value, repeat customers, new vs returning)
      - Product performance (bestsellers, food vs beverages)
      - Store location performance
      
      Respond politely that data is not available for:
      - Individual customer personal information (names, contact details)
      - Real-time inventory levels
      - Employee data
    
    sql_generation: |
      - Always use the 'completed_orders' filter when calculating revenue metrics (order_total > 0)
      - When analyzing time series data, use DATE_TRUNC() for grouping by day/month/year
      - Round all currency values to 2 decimal places using ROUND(value, 2)
      - When comparing food vs beverages, use is_food_item and is_drink_item flags
      - For customer segmentation, use customer_type field ('new' vs 'returning')
      - Order dates are stored in 'ordered_at' column with timezone
      - Tax rates vary by location - use location_id to join to locations table
      - Prices are stored in cents (e.g., 1100 = $11.00), convert by dividing by 100 for display

  - name: time_series_defaults
    question_categorization: |
      When users ask about "recent" data without specifying a time frame:
      - Default to last 30 days for daily analysis
      - Default to last 12 months for monthly analysis
      - Default to last 3 years for yearly analysis
    
    sql_generation: |
      - Use the recent_orders_30d filter for "recent" questions without a specific timeframe
      - Always include ORDER BY when showing time series (most recent first)
      - Use DATE_TRUNC('DAY', ordered_at) for daily granularity
      - Use DATE_TRUNC('MONTH', ordered_at) for monthly granularity
      - Filter out orders with order_total = 0 (cancelled/returned orders)
