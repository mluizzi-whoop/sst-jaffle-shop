snowflake_metrics:
  - name: total_orders
    description: Total number of orders placed
    tables:
      - {{ table('orders') }}
    expr: COUNT(DISTINCT {{ column('orders', 'order_id') }})
    synonyms:
      - order count
      - number of orders
      - total order count

  - name: total_revenue
    description: Total revenue from all orders including tax
    tables:
      - {{ table('orders') }}
    expr: SUM({{ column('orders', 'order_total') }})
    synonyms:
      - total sales
      - gross revenue
      - total order value

  - name: total_revenue_pretax
    description: Total revenue from all orders before tax (subtotal)
    tables:
      - {{ table('orders') }}
    expr: SUM({{ column('orders', 'subtotal') }})
    synonyms:
      - subtotal
      - revenue before tax
      - pretax revenue

  - name: total_tax_collected
    description: Total tax collected across all orders
    tables:
      - {{ table('orders') }}
    expr: SUM({{ column('orders', 'tax_paid') }})
    synonyms:
      - tax revenue
      - total taxes
      - tax collected

  - name: average_order_value
    description: Average order total (including tax)
    tables:
      - {{ table('orders') }}
    expr: AVG({{ column('orders', 'order_total') }})
    synonyms:
      - AOV
      - avg order value
      - mean order value

  - name: food_orders
    description: Number of orders containing food items
    tables:
      - {{ table('orders') }}
    expr: |
      COUNT(DISTINCT CASE 
        WHEN {{ column('orders', 'is_food_order') }} = TRUE 
        THEN {{ column('orders', 'order_id') }} 
      END)
    synonyms:
      - orders with food
      - food order count

  - name: drink_orders
    description: Number of orders containing drink/beverage items
    tables:
      - {{ table('orders') }}
    expr: |
      COUNT(DISTINCT CASE 
        WHEN {{ column('orders', 'is_drink_order') }} = TRUE 
        THEN {{ column('orders', 'order_id') }} 
      END)
    synonyms:
      - orders with drinks
      - beverage order count
      - drink order count
